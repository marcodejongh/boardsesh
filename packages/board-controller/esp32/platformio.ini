; PlatformIO Project Configuration File
;
; BoardSesh ESP32 Controller
; Controls WS2811 LEDs for climbing boards and communicates with BoardSesh backend
;

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

; Libraries
lib_deps =
    fastled/FastLED@^3.6.0
    bblanchon/ArduinoJson@^7.0.0
    links2004/WebSockets@^2.4.0
    tzapu/WiFiManager@^2.0.17
    h2zero/NimBLE-Arduino@^1.4.1

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_NIMBLE_CPP_ENABLE_RETURN_CODE_TEXT=1
    -DCONFIG_BT_NIMBLE_ROLE_PERIPHERAL=1
    -DCONFIG_BT_NIMBLE_ROLE_BROADCASTER=1
    ; Disable unused BLE roles to save memory
    -DCONFIG_BT_NIMBLE_ROLE_CENTRAL=0
    -DCONFIG_BT_NIMBLE_ROLE_OBSERVER=0
    ; FastLED configuration
    -DFASTLED_ESP32_I2S=true

; Upload and monitor
upload_speed = 921600
monitor_filters = esp32_exception_decoder

; Partition scheme for OTA updates
board_build.partitions = min_spiffs.csv

; File system for web UI
board_build.filesystem = spiffs

; Alternative board: ESP32-S3 (more memory, better BLE)
[env:esp32s3dev]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

lib_deps =
    fastled/FastLED@^3.6.0
    bblanchon/ArduinoJson@^7.0.0
    links2004/WebSockets@^2.4.0
    tzapu/WiFiManager@^2.0.17
    h2zero/NimBLE-Arduino@^1.4.1

build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_NIMBLE_CPP_ENABLE_RETURN_CODE_TEXT=1
    -DCONFIG_BT_NIMBLE_ROLE_PERIPHERAL=1
    -DCONFIG_BT_NIMBLE_ROLE_BROADCASTER=1
    -DCONFIG_BT_NIMBLE_ROLE_CENTRAL=0
    -DCONFIG_BT_NIMBLE_ROLE_OBSERVER=0
    -DFASTLED_ESP32_I2S=true
    -DBOARD_HAS_PSRAM

upload_speed = 921600
monitor_filters = esp32_exception_decoder
board_build.partitions = default_8MB.csv
board_build.filesystem = spiffs
