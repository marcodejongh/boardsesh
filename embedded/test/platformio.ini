; PlatformIO Unit Test Configuration
;
; This configuration is for running native unit tests on the host machine.
; Tests run without requiring actual ESP32 hardware.
;
; Run tests with: pio test -e native
; Run specific test: pio test -e native -f test_aurora_protocol

[platformio]
default_envs = native
src_dir = .
test_dir = .

[env:native]
platform = native
build_flags =
    -std=c++17
    -I mocks
    -I ../libs/aurora-protocol/src
    -I ../libs/log-buffer/src
    -I ../libs/led-controller/src
    -I ../libs/config-manager/src
    -D UNIT_TEST
    -D NATIVE_BUILD
lib_deps =
lib_extra_dirs = ../libs
test_framework = unity

; Build with coverage for CI reports
; build_flags = ${env:native.build_flags} -fprofile-arcs -ftest-coverage
